import{r as l,j as e,R as A,L as D,C as E,X as S,Y as T,T as M,a as B,c as O}from"./vendor-uy8bHOC1.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}})();function C(){document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)}function R(){C(),window.addEventListener("resize",C)}const $="_chartContainer_mky4u_1",I="_chart_mky4u_1",P="_heading_mky4u_17",H="_toggle_mky4u_31",V="_legend_mky4u_44",U="_legendItem_mky4u_60",q="_right_mky4u_66",K="_colorDot_mky4u_71",h={chartContainer:$,chart:I,heading:P,toggle:H,legend:V,legendItem:U,right:q,colorDot:K},c={axisText:"#9ec3ff",axisLine:"#6b93c9",grid:"#2a4566",tooltipBg:"rgba(18, 34, 52, 0.96)",tooltipBorder:"#3a5f8f",tooltipText:"#dbeaff"},v={joy:"Joie",trust:"Confiance",positive:"Positivité",negative:"Négativité",fear:"Peur",anger:"Colère",disgust:"Dégoût",sadness:"Tristesse"},y={joy:"#00FFFF",trust:"#00CFFF",positive:"#66FF99",negative:"#FF0066",fear:"#FF6600",anger:"#FF3300",disgust:"#FFCC66",sadness:"#FF9999"},m=Object.keys(y),F=t=>new Date(t).toLocaleDateString("fr-FR",{year:"2-digit",month:"2-digit",day:"2-digit"}),Y=t=>t.toFixed(2);function G(){const[t,o]=l.useState(null),[i,s]=l.useState("delta"),[r,a]=l.useState(!1),[f,g]=l.useState(!1);l.useEffect(()=>{(async()=>{try{const x=(await(await fetch("chart.json")).json()).slice().sort((u,_)=>+new Date(u.createdAt)-+new Date(_.createdAt)).map(u=>({date:new Date(u.createdAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),createdAt:u.createdAt,...Object.fromEntries(m.map(_=>[_,+(u.emotions[_]??0).toFixed(3)]))}));o(x)}catch(n){console.error("Erreur lors du chargement des données:",n)}})()},[]);const w=l.useMemo(()=>{if(!t)return null;const n=Object.fromEntries(m.map(d=>[d,0]));return t.map(d=>{const x={...d};for(const u of m)n[u]+=d[u],x[u]=+n[u].toFixed(3);return x})},[t]);if(!t)return e.jsx("p",{children:"Loading chart…"});const N=i==="delta"?t:w,k=t.length;return e.jsxs("div",{className:h.chartContainer,children:[e.jsx("div",{className:h.chart,title:"Cliquer pour basculer delta/cumul",onMouseDown:()=>g(!0),onMouseUp:()=>g(!1),onTouchStart:()=>g(!0),onTouchEnd:()=>g(!1),children:e.jsx(A,{width:"100%",height:"100%",children:e.jsxs(D,{data:N,children:[r&&e.jsx(E,{stroke:c.grid,strokeDasharray:"3 3",vertical:!1}),e.jsx(S,{dataKey:"createdAt",hide:!r,tick:{fill:c.axisText},axisLine:{stroke:c.axisLine},tickLine:{stroke:c.axisLine},tickFormatter:F}),e.jsx(T,{hide:!r,tick:{fill:c.axisText},axisLine:{stroke:c.axisLine},tickLine:{stroke:c.axisLine}}),e.jsx(M,{contentStyle:{backgroundColor:c.tooltipBg,border:`1px solid ${c.tooltipBorder}`,borderRadius:8},labelStyle:{color:c.tooltipText},itemStyle:{color:c.tooltipText},cursor:{stroke:c.axisLine,strokeDasharray:"3 3"},wrapperStyle:{display:f?"block":"none"},labelFormatter:F,formatter:(n,d)=>[Y(n),v[d]??d]}),m.map(n=>e.jsx(B,{type:"monotone",dataKey:n,stroke:y[n],strokeWidth:2,dot:!1,activeDot:f?{r:5}:!1},n))]})})}),e.jsx("p",{className:h.heading,children:e.jsxs("span",{onClick:()=>s(i==="delta"?"cumulative":"delta"),role:"button",children:[e.jsx("button",{type:"button",className:h.toggle,onClick:n=>{n.stopPropagation(),a(d=>!d)},title:r?"Masquer axes et valeurs":"Afficher axes et valeurs",children:"⚙️"}),i==="delta"?`Évolution quotidienne des émotions sur les ${k} derniers jours.`:`Cumul émotionnel des ${k} derniers jours.`]})}),e.jsxs("div",{className:h.legend,children:[e.jsx("div",{className:h.column,children:m.slice(0,Math.ceil(m.length/2)).map(n=>e.jsx(L,{color:y[n],label:v[n]},n))}),e.jsx("div",{className:h.column,children:m.slice(Math.ceil(m.length/2)).map(n=>e.jsx(L,{color:y[n],label:v[n],right:!0},n))})]})]})}function L({color:t,label:o,right:i=!1}){return e.jsxs("div",{className:`${h.legendItem} ${i?h.right:""}`,children:[e.jsx("span",{className:h.colorDot,style:{backgroundColor:t}}),e.jsx("span",{children:o})]})}const X="_report_149pe_1",z="_emoji_149pe_9",J="_text_149pe_15",b={report:X,emoji:z,text:J};function W(){const[t,o]=l.useState(null);return l.useEffect(()=>{fetch("/devbarometer/"+"report.json").then(s=>s.ok?s.json():null).then(s=>{o(s&&typeof s=="object"?s:null)})},[]),t?e.jsxs("div",{className:b.report,children:[e.jsx("div",{className:b.emoji,children:t.emoji}),e.jsx("p",{className:b.text,children:t.text})]}):e.jsx("p",{children:"Loading…"})}function Q(t){return typeof t=="object"&&t!==null&&"title"in t&&"weight"in t&&"source"in t&&typeof t.title=="string"&&typeof t.weight=="number"&&typeof t.source=="string"}function Z(t){const o=t.slice();for(let i=o.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1));[o[i],o[s]]=[o[s],o[i]]}return o}const ee="_ticker_18y2x_1",te="_row_18y2x_18",se="_track_18y2x_22",re="_item_18y2x_33",j={ticker:ee,row:te,track:se,item:re};function oe(){const[t,o]=l.useState(null);return l.useEffect(()=>{fetch("/devbarometer/"+"ticker.json").then(s=>s.ok?s.json():[]).then(s=>{Array.isArray(s)&&s.every(Q)?o(Z(s)):o([])}).catch(s=>{console.error("Error loading headlines:",s),o([])})},[]),t===null?e.jsx("p",{children:"Chargement…"}):t.length===0?e.jsx("p",{children:"Aucun titre chargé."}):e.jsx("div",{className:j.ticker,children:e.jsx("div",{className:j.track,children:e.jsx("div",{className:j.row,children:[...t,...t].map(({title:i,source:s},r)=>e.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:j.item,children:['"',i,'"']},r))})})})}const ne="_navButton_eu9iu_1",ie="_heading_eu9iu_18",ae="_mainContent_eu9iu_29",ce="_footer_eu9iu_39",p={navButton:ne,heading:ie,mainContent:ae,footer:ce};function le(){return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:p.header,children:[e.jsx("h1",{className:p.heading,children:"DevBarometer"}),e.jsx("a",{href:"https://github.com/clementvidon/devbarometer",className:p.navButton,"aria-label":"Infos page",children:"à propos"})]}),e.jsxs("main",{className:p.mainContent,children:[e.jsx(W,{}),e.jsx(oe,{}),e.jsx(G,{})]}),e.jsxs("footer",{className:p.footer,children:["Made with ❤️ by",e.jsx("a",{href:"https://github.com/clementvidon/","aria-label":"Clément Vidon GitHub",children:" Clément Vidon "}),"· MIT License"]})]})}R();O.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(le,{})}));
