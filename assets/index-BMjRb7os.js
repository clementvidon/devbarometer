import{r as d,j as e,R as N,L as A,C as D,X as E,Y as S,T,a as M,c as B}from"./vendor-uy8bHOC1.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function C(){document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)}function O(){C(),window.addEventListener("resize",C)}const R="_chartContainer_152ww_1",$="_chart_152ww_1",I="_heading_152ww_17",P="_toggle_152ww_31",H="_legend_152ww_44",V="_legendItem_152ww_60",U="_right_152ww_66",q="_colorDot_152ww_71",f={chartContainer:R,chart:$,heading:I,toggle:P,legend:H,legendItem:V,right:U,colorDot:q},l={axisText:"#9ec3ff",axisLine:"#6b93c9",grid:"#2a4566",tooltipBg:"rgba(18, 34, 52, 0.96)",tooltipBorder:"#3a5f8f",tooltipText:"#dbeaff"},c={positive:"#66FF99",joy:"#00FFFF",trust:"#00CFFF",anticipation:"#4781FF",surprise:"#99CCFF",negative:"#FF0066",anger:"#FF3300",fear:"#FF6600",sadness:"#FF9999",disgust:"#FFCC66"},y=Object.keys(c),F=t=>new Date(t).toLocaleDateString("fr-FR",{year:"2-digit",month:"2-digit",day:"2-digit"}),K=t=>t.toFixed(2);function Y(){const[t,o]=d.useState(null),[n,r]=d.useState("delta"),[s,i]=d.useState(!1),[p,g]=d.useState(!1);d.useEffect(()=>{(async()=>{try{const j=(await(await fetch("average-sentiments.json")).json()).slice().sort((u,_)=>+new Date(u.createdAt)-+new Date(_.createdAt)).map(u=>({date:new Date(u.createdAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),createdAt:u.createdAt,...Object.fromEntries(y.map(_=>[_,+(u.emotions[_]??0).toFixed(3)]))}));o(j)}catch(a){console.error("Erreur lors du chargement des données:",a)}})()},[]);const L=d.useMemo(()=>{if(!t)return null;const a=Object.fromEntries(y.map(m=>[m,0]));return t.map(m=>{const j={...m};for(const u of y)a[u]+=m[u],j[u]=+a[u].toFixed(3);return j})},[t]);if(!t)return e.jsx("p",{children:"Loading chart…"});const k=n==="delta"?t:L,w=t.length;return e.jsxs("div",{className:f.chartContainer,children:[e.jsx("div",{className:f.chart,title:"Cliquer pour basculer delta/cumul",onMouseDown:()=>g(!0),onMouseUp:()=>g(!1),onTouchStart:()=>g(!0),onTouchEnd:()=>g(!1),children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(A,{data:k,children:[s&&e.jsx(D,{stroke:l.grid,strokeDasharray:"3 3",vertical:!1}),e.jsx(E,{dataKey:"createdAt",hide:!s,tick:{fill:l.axisText},axisLine:{stroke:l.axisLine},tickLine:{stroke:l.axisLine},tickFormatter:F}),e.jsx(S,{hide:!s,tick:{fill:l.axisText},axisLine:{stroke:l.axisLine},tickLine:{stroke:l.axisLine}}),e.jsx(T,{contentStyle:{backgroundColor:l.tooltipBg,border:`1px solid ${l.tooltipBorder}`,borderRadius:8},labelStyle:{color:l.tooltipText},itemStyle:{color:l.tooltipText},cursor:{stroke:l.axisLine,strokeDasharray:"3 3"},wrapperStyle:{display:p?"block":"none"},labelFormatter:F,formatter:a=>K(a)}),y.map(a=>e.jsx(M,{type:"monotone",dataKey:a,stroke:c[a],strokeWidth:2,dot:!1,activeDot:p?{r:5}:!1},a))]})})}),e.jsx("p",{className:f.heading,children:e.jsxs("span",{onClick:()=>r(n==="delta"?"cumulative":"delta"),role:"button",children:[e.jsx("button",{type:"button",className:f.toggle,onClick:a=>{a.stopPropagation(),i(m=>!m)},title:s?"Masquer axes et valeurs":"Afficher axes et valeurs",children:"⚙️"}),n==="delta"?`Évolution quotidienne des émotions sur les ${w} derniers jours.`:`Cumul émotionnel des ${w} derniers jours.`]})}),e.jsxs("div",{className:f.legend,children:[e.jsxs("div",{className:f.column,children:[e.jsx(h,{color:c.positive,label:"Positivité"}),e.jsx(h,{color:c.joy,label:"Joie"}),e.jsx(h,{color:c.trust,label:"Confiance"}),e.jsx(h,{color:c.anticipation,label:"Anticipation"}),e.jsx(h,{color:c.surprise,label:"Surprise"})]}),e.jsxs("div",{className:f.column,children:[e.jsx(h,{color:c.negative,label:"Négativité",right:!0}),e.jsx(h,{color:c.anger,label:"Colère",right:!0}),e.jsx(h,{color:c.fear,label:"Peur",right:!0}),e.jsx(h,{color:c.sadness,label:"Tristesse",right:!0}),e.jsx(h,{color:c.disgust,label:"Dégoût",right:!0})]})]})]})}function h({color:t,label:o,right:n=!1}){return e.jsxs("div",{className:`${f.legendItem} ${n?f.right:""}`,children:[e.jsx("span",{className:f.colorDot,style:{backgroundColor:t}}),e.jsx("span",{children:o})]})}const G="_report_118hj_1",X="_emoji_118hj_9",z="_text_118hj_15",b={report:G,emoji:X,text:z};function J(){const[t,o]=d.useState(null);return d.useEffect(()=>{fetch("/devbarometer/"+"report.json").then(r=>r.ok?r.json():null).then(r=>{o(r&&typeof r=="object"?r:null)})},[]),t?e.jsxs("div",{className:b.report,children:[e.jsx("div",{className:b.emoji,children:t.emoji}),e.jsx("p",{className:b.text,children:t.text})]}):e.jsx("p",{children:"Loading…"})}function W(t){return typeof t=="object"&&t!==null&&"title"in t&&"upvotes"in t&&"url"in t&&typeof t.title=="string"&&typeof t.upvotes=="number"&&typeof t.url=="string"}function Q(t){const o=t.slice();for(let n=o.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[o[n],o[r]]=[o[r],o[n]]}return o}const Z="_ticker_18y2x_1",ee="_row_18y2x_18",te="_track_18y2x_22",re="_item_18y2x_33",v={ticker:Z,row:ee,track:te,item:re};function se(){const[t,o]=d.useState(null);return d.useEffect(()=>{fetch("/devbarometer/"+"headlines.json").then(r=>r.ok?r.json():[]).then(r=>{Array.isArray(r)&&r.every(W)?o(Q(r)):o([])}).catch(r=>{console.error("Error loading headlines:",r),o([])})},[]),t===null?e.jsx("p",{children:"Chargement…"}):t.length===0?e.jsx("p",{children:"Aucun titre chargé."}):e.jsx("div",{className:v.ticker,children:e.jsx("div",{className:v.track,children:e.jsx("div",{className:v.row,children:[...t,...t].map(({title:n,url:r},s)=>e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:v.item,children:['"',n,'"']},s))})})})}const oe="_navButton_eu9iu_1",ne="_heading_eu9iu_18",ie="_mainContent_eu9iu_29",ae="_footer_eu9iu_39",x={navButton:oe,heading:ne,mainContent:ie,footer:ae};function le(){return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:x.header,children:[e.jsx("h1",{className:x.heading,children:"DevBarometer"}),e.jsx("a",{href:"infos.html",className:x.navButton,"aria-label":"Infos page",children:"à propos"})]}),e.jsxs("main",{className:x.mainContent,children:[e.jsx(J,{}),e.jsx(se,{}),e.jsx(Y,{})]}),e.jsxs("footer",{className:x.footer,children:["Made with ❤️ by",e.jsx("a",{href:"https://github.com/clementvidon/","aria-label":"Clément Vidon GitHub",children:" Clément Vidon "}),"· MIT License"]})]})}O();B.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(le,{})}));
