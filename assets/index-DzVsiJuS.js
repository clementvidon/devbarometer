import{r as h,j as e,R as N,L,C as w,X as A,Y as D,T as E,a as d,c as T}from"./vendor-uy8bHOC1.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const x of a.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&s(x)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}})();function _(){document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)}function K(){_(),window.addEventListener("resize",_)}function S(t){return typeof t=="object"&&t!==null&&"title"in t&&"upvotes"in t&&"url"in t&&typeof t.title=="string"&&typeof t.upvotes=="number"&&typeof t.url=="string"}function B(t){const r=t.slice();for(let i=r.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1));[r[i],r[s]]=[r[s],r[i]]}return r}const W="_ticker_18i01_1",$="_row_18i01_18",H="_track_18i01_22",I="_item_18i01_33",j={ticker:W,row:$,track:H,item:I};function M(){const[t,r]=h.useState(null);return h.useEffect(()=>{fetch("/devbarometer/"+"headlines.json").then(s=>s.ok?s.json():[]).then(s=>{Array.isArray(s)&&s.every(S)?r(B(s)):r([])}).catch(s=>{console.error("Error loading headlines:",s),r([])})},[]),t===null?e.jsx("p",{children:"Chargement…"}):t.length===0?e.jsx("p",{children:"Aucun titre chargé."}):e.jsx("div",{className:j.ticker,children:e.jsx("div",{className:j.track,children:e.jsx("div",{className:j.row,children:[...t,...t].map(({title:i,url:s},o)=>e.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:j.item,children:['"',i,'"']},o))})})})}const O="_chartContainer_1i1cj_1",P="_chart_1i1cj_1",R="_heading_1i1cj_17",q="_toggle_1i1cj_31",U="_legend_1i1cj_44",V="_legendItem_1i1cj_60",Y="_right_1i1cj_66",G="_colorDot_1i1cj_71",c={chartContainer:O,chart:P,heading:R,toggle:q,legend:U,legendItem:V,right:Y,colorDot:G},l={axisText:"#9ec3ff",axisLine:"#6b93c9",grid:"#2a4566",tooltipBg:"rgba(18, 34, 52, 0.96)",tooltipBorder:"#3a5f8f",tooltipText:"#dbeaff"},v=["positive","negative","joy","fear","anger","trust","disgust","sadness","surprise","anticipation"];function X(){const[t,r]=h.useState(null),[i,s]=h.useState("delta"),[o,a]=h.useState(!1);h.useEffect(()=>{(async()=>{try{const g=(await(await fetch("average-sentiments.json")).json()).slice().sort((n,C)=>+new Date(n.createdAt)-+new Date(C.createdAt)).map(n=>({date:new Date(n.createdAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),createdAt:n.createdAt,positive:+(n.emotions.positive??0).toFixed(3),negative:+(n.emotions.negative??0).toFixed(3),joy:+(n.emotions.joy??0).toFixed(3),fear:+(n.emotions.fear??0).toFixed(3),anger:+(n.emotions.anger??0).toFixed(3),trust:+(n.emotions.trust??0).toFixed(3),disgust:+(n.emotions.disgust??0).toFixed(3),sadness:+(n.emotions.sadness??0).toFixed(3),surprise:+(n.emotions.surprise??0).toFixed(3),anticipation:+(n.emotions.anticipation??0).toFixed(3)}));r(g)}catch(f){console.error("Erreur lors du chargement des données:",f)}})()},[]);const x=h.useMemo(()=>{if(!t)return null;const f=Object.fromEntries(v.map(m=>[m,0]));return t.map(m=>{const g={...m};for(const n of v)f[n]+=m[n],g[n]=+f[n].toFixed(3);return g})},[t]);if(!t)return e.jsx("p",{children:"Loading chart…"});if(t.length===0)return e.jsx("p",{children:"No sentiment history available."});const k=i==="delta"?t:x??t,F=t.length,b=o?"Masquer axes et valeurs":"Afficher axes et valeurs";return e.jsxs("div",{className:c.chartContainer,children:[e.jsx("div",{className:c.chart,title:"Cliquer sur le graphique pour basculer delta/cumul",children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(L,{data:k,children:[o&&e.jsx(w,{stroke:l.grid,strokeDasharray:"3 3",vertical:!1}),e.jsx(A,{dataKey:"date",hide:!o,tick:{fill:l.axisText},axisLine:{stroke:l.axisLine},tickLine:{stroke:l.axisLine}}),e.jsx(D,{hide:!o,tick:{fill:l.axisText},axisLine:{stroke:l.axisLine},tickLine:{stroke:l.axisLine}}),e.jsx(E,{contentStyle:{backgroundColor:l.tooltipBg,border:`1px solid ${l.tooltipBorder}`,borderRadius:8},labelStyle:{color:l.tooltipText},itemStyle:{color:l.tooltipText},cursor:{stroke:l.axisLine,strokeDasharray:"3 3"}}),e.jsx(d,{type:"monotone",dataKey:"positive",stroke:"#66FF99",strokeWidth:2,dot:!1}),e.jsx(d,{type:"monotone",dataKey:"joy",stroke:"#00FFFF",strokeWidth:2,dot:!1}),e.jsx(d,{type:"monotone",dataKey:"trust",stroke:"#00CFFF",strokeWidth:2,dot:!1}),e.jsx(d,{type:"monotone",dataKey:"anticipation",stroke:"#4781FF",strokeWidth:2,dot:!1}),e.jsx(d,{type:"monotone",dataKey:"surprise",stroke:"#99CCFF",strokeWidth:2,dot:!1}),e.jsx(d,{type:"monotone",dataKey:"negative",stroke:"#FF0066",strokeWidth:2,dot:!1}),e.jsx(d,{type:"monotone",dataKey:"anger",stroke:"#FF3300",strokeWidth:2,dot:!1}),e.jsx(d,{type:"monotone",dataKey:"fear",stroke:"#FF6600",strokeWidth:2,dot:!1}),e.jsx(d,{type:"monotone",dataKey:"sadness",stroke:"#FF9999",strokeWidth:2,dot:!1}),e.jsx(d,{type:"monotone",dataKey:"disgust",stroke:"#FFCC66",strokeWidth:2,dot:!1})]})})}),e.jsx("p",{className:c.heading,children:e.jsxs("span",{onClick:()=>s(f=>f==="delta"?"cumulative":"delta"),className:c.headingText,role:"button","aria-pressed":i==="cumulative",title:"Basculer entre delta et cumul",children:[e.jsx("button",{type:"button",className:c.toggle,onClick:f=>{f.stopPropagation(),a(m=>!m)},title:b,"aria-pressed":o,"aria-label":"Afficher/masquer axes et grille",children:"⚙️"}),i==="delta"?`Évolution quotidienne des émotions sur les ${F} derniers jours.`:`Cumul émotionnel des ${F} derniers jours.`]})}),e.jsxs("div",{className:c.legend,children:[e.jsxs("div",{className:c.column,children:[e.jsx(u,{color:"#66FF99",label:"Positivité"}),e.jsx(u,{color:"#00FFFF",label:"Joie"}),e.jsx(u,{color:"#00CFFF",label:"Confiance"}),e.jsx(u,{color:"#4781FF",label:"Anticipation"}),e.jsx(u,{color:"#99CCFF",label:"Surprise"})]}),e.jsxs("div",{className:c.column,children:[e.jsx(u,{color:"#FF0066",label:"Négativité",right:!0}),e.jsx(u,{color:"#FF3300",label:"Colère",right:!0}),e.jsx(u,{color:"#FF6600",label:"Peur",right:!0}),e.jsx(u,{color:"#FF9999",label:"Tristesse",right:!0}),e.jsx(u,{color:"#FFCC66",label:"Dégoût",right:!0})]})]})]})}function u({color:t,label:r,right:i=!1}){return e.jsxs("div",{className:`${c.legendItem} ${i?c.right:""}`,children:[e.jsx("span",{className:c.colorDot,style:{backgroundColor:t}}),e.jsx("span",{children:r})]})}const z="_report_119gg_1",J="_emoji_119gg_9",Q="_text_119gg_15",y={report:z,emoji:J,text:Q};function Z(){const[t,r]=h.useState(null);return h.useEffect(()=>{fetch("/devbarometer/"+"report.json").then(s=>s.ok?s.json():null).then(s=>{r(s&&typeof s=="object"?s:null)})},[]),t?e.jsxs("div",{className:y.report,children:[e.jsx("div",{className:y.emoji,children:t.emoji}),e.jsx("p",{className:y.text,children:t.text})]}):e.jsx("p",{children:"Loading…"})}const ee="_navButton_eu9iu_1",te="_heading_eu9iu_18",se="_mainContent_eu9iu_29",oe="_footer_eu9iu_39",p={navButton:ee,heading:te,mainContent:se,footer:oe};function re(){return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:p.header,children:[e.jsx("h1",{className:p.heading,children:"DevBarometer"}),e.jsx("a",{href:"infos.html",className:p.navButton,"aria-label":"Infos page",children:"À propos"})]}),e.jsxs("main",{className:p.mainContent,children:[e.jsx(Z,{}),e.jsx(M,{}),e.jsx(X,{})]}),e.jsxs("footer",{className:p.footer,children:["Made with ❤️ by",e.jsx("a",{href:"https://github.com/clementvidon/","aria-label":"Clément Vidon GitHub",children:" Clément Vidon "}),"· MIT License"]})]})}K();T.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(re,{})}));
