import{r as c,j as e,R as A,L as N,C as D,X as E,Y as T,T as R,a as S,c as P}from"./vendor-uy8bHOC1.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();function k(){document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)}function I(){k(),window.addEventListener("resize",k)}function O(t){if(!t||typeof t!="object")return!1;const r=t;return typeof r.createdAt=="string"&&typeof r.emotions=="object"&&r.emotions!==null}function B(t){if(!Array.isArray(t)||!t.every(O))throw new Error("Invalid chart.json shape")}const M="_chartContainer_mky4u_1",$="_chart_mky4u_1",H="_heading_mky4u_17",U="_toggle_mky4u_31",V="_legend_mky4u_44",q="_legendItem_mky4u_60",K="_right_mky4u_66",Y="_colorDot_mky4u_71",d={chartContainer:M,chart:$,heading:H,toggle:U,legend:V,legendItem:q,right:K,colorDot:Y},l={axisText:"#9ec3ff",axisLine:"#6b93c9",grid:"#2a4566",tooltipBg:"rgba(18, 34, 52, 0.96)",tooltipBorder:"#3a5f8f",tooltipText:"#dbeaff"},j={joy:"Joie",trust:"Confiance",fear:"Peur",anger:"Colère",disgust:"Dégoût",sadness:"Tristesse"},m={joy:"#00FFFF",trust:"#00CFFF",fear:"#FF6600",anger:"#FF3300",disgust:"#FFCC66",sadness:"#FF9999"},G=new Intl.DateTimeFormat("fr-FR",{year:"2-digit",month:"2-digit",day:"2-digit"}),C=new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),J=new Intl.NumberFormat("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2});function X(t){return t.slice().sort((r,o)=>+new Date(r.createdAt)-+new Date(o.createdAt)).map(r=>{const o={};for(const n of Object.keys(m))o[n]=+(r.emotions[n]??0);return{dateLabel:C.format(new Date(r.createdAt)),createdAt:r.createdAt,...o}})}function z(t){const r=Object.fromEntries(Object.keys(m).map(o=>[o,0]));return t.map(o=>{const n={...o};return Object.keys(m).forEach(s=>{r[s]+=o[s],n[s]=+r[s].toFixed(3)}),n})}function w({color:t,label:r,right:o=!1}){return e.jsxs("div",{className:`${d.legendItem} ${o?d.right:""}`,children:[e.jsx("span",{className:d.colorDot,style:{backgroundColor:t}}),e.jsx("span",{children:r})]})}function W(){const[t,r]=c.useState(null),[o,n]=c.useState("delta"),[s,a]=c.useState(!1),[h,_]=c.useState(!1);c.useEffect(()=>{(async()=>{try{const u=await(await fetch("chart.json")).json();B(u),r(X(u))}catch(i){console.error("Erreur lors du chargement des données:",i)}})()},[]);const F=c.useMemo(()=>t?z(t):null,[t]),v=t?o==="delta"?t:F:null,b=(t==null?void 0:t.length)??0,L=c.useCallback(()=>_(!0),[]),x=c.useCallback(()=>_(!1),[]);if(!v)return e.jsx("p",{children:"Loading chart…"});const f=Object.keys(m);return e.jsxs("div",{className:d.chartContainer,children:[e.jsx("div",{className:d.chart,title:"Cliquer pour basculer delta/cumul",onPointerDown:L,onPointerUp:x,onPointerCancel:x,onPointerLeave:x,children:e.jsx(A,{width:"100%",height:"100%",children:e.jsxs(N,{data:v,children:[s&&e.jsx(D,{stroke:l.grid,strokeDasharray:"3 3",vertical:!1}),e.jsx(E,{dataKey:"createdAt",hide:!s,tick:{fill:l.axisText},axisLine:{stroke:l.axisLine},tickLine:{stroke:l.axisLine},tickFormatter:i=>G.format(new Date(i))}),e.jsx(T,{hide:!s,tick:{fill:l.axisText},axisLine:{stroke:l.axisLine},tickLine:{stroke:l.axisLine}}),e.jsx(R,{contentStyle:{backgroundColor:l.tooltipBg,border:`1px solid ${l.tooltipBorder}`,borderRadius:8},labelStyle:{color:l.tooltipText},itemStyle:{color:l.tooltipText},cursor:{stroke:l.axisLine,strokeDasharray:"3 3"},wrapperStyle:{display:h?"block":"none"},labelFormatter:i=>C.format(new Date(String(i))),formatter:(i,u)=>[J.format(i),j[u]??u]}),f.map(i=>e.jsx(S,{type:"monotone",dataKey:i,stroke:m[i],strokeWidth:2,dot:!1,activeDot:h?{r:5}:!1},i))]})})}),e.jsx("p",{className:d.heading,children:e.jsxs("span",{onClick:()=>n(i=>i==="delta"?"cumulative":"delta"),role:"button",children:[e.jsx("button",{type:"button",className:d.toggle,onClick:i=>{i.stopPropagation(),a(u=>!u)},title:s?"Masquer axes et valeurs":"Afficher axes et valeurs","aria-pressed":s,children:"⚙️"}),o==="delta"?`Évolution quotidienne des émotions sur les ${b} derniers jours.`:`Cumul émotionnel des ${b} derniers jours.`]})}),e.jsxs("div",{className:d.legend,children:[e.jsx("div",{className:d.column,children:f.slice(0,Math.ceil(f.length/2)).map(i=>e.jsx(w,{color:m[i],label:j[i]},i))}),e.jsx("div",{className:d.column,children:f.slice(Math.ceil(f.length/2)).map(i=>e.jsx(w,{color:m[i],label:j[i],right:!0},i))})]})]})}const Q="_report_149pe_1",Z="_emoji_149pe_9",ee="_text_149pe_15",y={report:Q,emoji:Z,text:ee};function te(){const[t,r]=c.useState(null);return c.useEffect(()=>{fetch("/devbarometer/"+"report.json").then(n=>n.ok?n.json():null).then(n=>{r(n&&typeof n=="object"?n:null)})},[]),t?e.jsxs("div",{className:y.report,children:[e.jsx("div",{className:y.emoji,children:t.emoji}),e.jsx("p",{className:y.text,children:t.text})]}):e.jsx("p",{children:"Loading…"})}function re(t){return typeof t=="object"&&t!==null&&"title"in t&&"weight"in t&&"source"in t&&typeof t.title=="string"&&typeof t.weight=="number"&&typeof t.source=="string"}function ne(t){const r=t.slice();for(let o=r.length-1;o>0;o--){const n=Math.floor(Math.random()*(o+1));[r[o],r[n]]=[r[n],r[o]]}return r}const se="_ticker_18y2x_1",oe="_row_18y2x_18",ie="_track_18y2x_22",ae="_item_18y2x_33",g={ticker:se,row:oe,track:ie,item:ae};function ce(){const[t,r]=c.useState(null);return c.useEffect(()=>{fetch("/devbarometer/"+"ticker.json").then(n=>n.ok?n.json():[]).then(n=>{Array.isArray(n)&&n.every(re)?r(ne(n)):r([])}).catch(n=>{console.error("Error loading headlines:",n),r([])})},[]),t===null?e.jsx("p",{children:"Chargement…"}):t.length===0?e.jsx("p",{children:"Aucun titre chargé."}):e.jsx("div",{className:g.ticker,children:e.jsx("div",{className:g.track,children:e.jsx("div",{className:g.row,children:[...t,...t].map(({title:o,source:n},s)=>e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:g.item,children:['"',o,'"']},s))})})})}const le="_navButton_eu9iu_1",de="_heading_eu9iu_18",ue="_mainContent_eu9iu_29",me="_footer_eu9iu_39",p={navButton:le,heading:de,mainContent:ue,footer:me};function he(){return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:p.header,children:[e.jsx("h1",{className:p.heading,children:"DevBarometer"}),e.jsx("a",{href:"https://github.com/clementvidon/devbarometer",className:p.navButton,"aria-label":"Infos page",children:"à propos"})]}),e.jsxs("main",{className:p.mainContent,children:[e.jsx(te,{}),e.jsx(ce,{}),e.jsx(W,{})]}),e.jsxs("footer",{className:p.footer,children:["Made with ❤️ by",e.jsx("a",{href:"https://github.com/clementvidon/","aria-label":"Clément Vidon GitHub",children:" Clément Vidon "}),"· MIT License"]})]})}I();P.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(he,{})}));
